Section 2. μ•„ν‚¤ν…μ² κ°μ”
=====================
> 1. μ•„ν‚¤ν…μ²
> 1-1. λ„¤ κ°μ μμ—­
> 1-2. κ³„μΈµ κµ¬μ΅° μ•„ν‚¤ν…μ²
> 2. DIP
> 3. λ„λ©”μΈ μμ—­μ μ£Όμ” κµ¬μ„±μ”μ†
> 4. μΈν”„λΌμ¤νΈλ­μ²
> 5. λ¨λ“

## 1. μ•„ν‚¤ν…μ²

### π›οΈ λ„¤ κ°μ μμ—­
 μ•„ν‚¤ν…μ²μ μ „ν•μ μΈ μμ—­, 'ν‘ν„', 'μ‘μ©', 'λ„λ©”μΈ', 'μΈν”„λΌμ¤νΈλ­μ²'μ λ„¤ μμ—­μ΄λ‹¤.

<img src="https://github.com/ro117-youshin/TIL/blob/main/DomainDrivenDesign/img/archi_1.png" width="400" height="300"/>

μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„ ν‘ν„ μμ—­μ€ HTTP μ”μ²­μ„ μ‘μ© μμ—­μ΄ ν•„μ”λ΅ ν•λ” ν•μ‹μΌλ΅ λ³€ν™ν•΄μ„ μ „λ‹¬ν•κ³ , μ‘μ© μμ—­μ μ‘λ‹µμ„ HTTP μ‘λ‹µμΌλ΅ λ³€ν™ν•΄μ„ μ „μ†΅ν•λ‹¤. 
μλ¥Ό λ“¤μ–΄, ν‘ν„ μμ—­μ€ μ›Ή λΈλΌμ°μ €κ°€ HTTP μ”μ²­ νλΌλ―Έν„°λ΅ μ „μ†΅ν• λ°μ΄ν„°λ¥Ό μ‘μ© μ„λΉ„μ¤κ°€ μ”κµ¬ν•λ” ν•μ‹μ κ°μ²΄ νƒ€μ…μΌλ΅ λ³€ν™ν•΄μ„ μ „λ‹¬ν•κ³ , μ‘μ© μ„λΉ„μ¤κ°€ λ¦¬ν„΄ν• κ²°κ³Όλ¥Ό JSON ν•μ‹μΌλ΅ λ³€ν™ν•΄μ„ HTTP μ‘λ‹µμΌλ΅ μ›Ή λΈλΌμ°μ €μ— μ „μ†΅ν•λ‹¤. 

ν‘ν„ μμ—­μ„ ν†µν•΄ μ‚¬μ©μμ μ”μ²­μ„ μ „λ‹¬λ°›λ” μ‘μ© μμ—­μ€ μ‹μ¤ν…μ΄ μ‚¬μ©μμ—κ² μ κ³µν•΄μ•Ό ν•  κΈ°λ¥μ„ κµ¬ν„ν•λ‹¤. μ£Όλ¬Έ μ·¨μ† κΈ°λ¥μ„ μ κ³µν•λ” μ‘μ© μ„λΉ„μ¤λ¥Ό μλ΅ λ“¤λ©΄ λ‹¤μκ³Ό κ°™μ΄ μ£Όλ¬Έ λ„λ©”μΈ λ¨λΈμ„ μ‚¬μ©ν•΄μ„ κΈ°λ¥μ„ κµ¬ν„ν•λ‹¤.
```java
public class CancelOrderService {
    
    @Transactional
    public void cancelOrder(String orderId) {
        Order order = findOrderById(orderId);
        if(order == null) throw new OrderNotFoundException(orderId);
        order.cancel();
    }
 ... 
}
```
μ‘μ© μ„λΉ„μ¤λ” λ΅μ§μ„ μ§μ ‘ μν–‰ν•κΈ°λ³΄λ‹¤λ” λ„λ©”μΈ λ¨λΈμ— λ΅μ§ μν–‰μ„ μ„μ„ν•λ‹¤. μ„ μ½”λ“λ„ μ£Όλ¬Έ μ·¨μ† λ΅μ§μ„ μ§μ ‘ κµ¬ν„ν•μ§€ μ•κ³  `Order`κ°μ²΄μ— μ·¨μ† μ²λ¦¬λ¥Ό μ„μ„ν•κ³  μλ‹¤.

<img src="https://github.com/ro117-youshin/TIL/blob/main/DomainDrivenDesign/img/application_to_domain.png" width="400" height="300"/>

<ins>λ„λ©”μΈ μμ—­μ€ λ„λ©”μΈ λ¨λΈμ„ κµ¬ν„ν•λ‹¤.</ins> 
* chap1μ—μ„ λ΄¤λ `Order`, `OrderLine`, `ShippingInfo`μ™€ κ°™μ€ λ„λ©”μΈ λ¨λΈμ΄ μ΄ μμ—­μ— μ„μΉν•λ‹¤. 
* λ„λ©”μΈ λ¨λΈμ€ λ„λ©”μΈμ ν•µμ‹¬ λ΅μ§μ„ κµ¬ν„ν•λ‹¤.

<ins>μΈν”„λΌμ¤νΈλ­μ² μμ—­μ€ κµ¬ν„ κΈ°μ μ— λ€ν• κ²ƒμ„ λ‹¤λ£¬λ‹¤.</ins> 
* RDBMS μ—°λ™μ„ μ²λ¦¬
* λ©”μ‹μ§• νμ— λ©”μ„Έμ§€λ¥Ό μ „μ†΅ν•κ±°λ‚ μμ‹ ν•λ” κΈ°λ¥μ„ κµ¬ν„
* λ½κ³ DBλ‚ HBaseλ¥Ό μ‚¬μ©ν•΄μ„ λ°μ΄ν„°λ² μ΄μ¤ μ—°λ™μ„ μ²λ¦¬
* SMTPλ¥Ό μ΄μ©ν• λ©”μΌ λ°μ†΅ κΈ°λ¥μ„ κµ¬ν„ν•κ±°λ‚ HTTP ν΄λΌμ΄μ–ΈνΈλ¥Ό μ΄μ©ν•΄μ„ REST APIλ¥Ό νΈμ¶ν•λ” κ²ƒλ„ μ²λ¦¬
μΈν”„λΌμ¤νΈλ­μ² μμ—­μ€ λ…Όλ¦¬μ μΈ κ°λ…μ„ ν‘ν„ν•κΈ°λ³΄λ‹¤ μ‹¤μ  κµ¬ν„μ„ λ‹¤λ£¬λ‹¤.

<img src="https://github.com/ro117-youshin/TIL/blob/main/DomainDrivenDesign/img/infrastructure.png" width="300" height="300"/>

λ„λ©”μΈ, μ‘μ©, ν‘ν„ μμ—­μ€ κµ¬ν„ κΈ°μ μ„ μ‚¬μ©ν• μ½”λ“λ¥Ό μ§μ ‘ λ§λ“¤μ§€ μ•λ”λ‹¤. 
λ€μ‹  μΈν”„λΌμ¤νΈλ­μ² μμ—­μ—μ„ μ κ³µν•λ” κΈ°λ¥μ„ μ‚¬μ©ν•΄μ„ ν•„μ”ν• κΈ°λ¥μ„ κ°λ°ν•λ‹¤. 

ex)
* μ‘μ© μμ—­μ— DB λ³΄κ΄€ λ°μ΄ν„°κ°€ ν•„μ”ν•λ©΄ μΈν”„λΌμ¤νΈλ­μ² μμ—­μ DB λ¨λ“μ„ μ‚¬μ©ν•΄μ„ λ°μ΄ν„°λ¥Ό μ½μ–΄μ¨λ‹¤.
* μ™Έλ¶€ λ©”μΌ λ°μ†΅μ„ μ„ν•΄ μΈν”„λΌμ¤νΈλ­μ²κ°€ μ κ³µν•λ” SMTP μ—°λ™ λ¨λ“μ„ μ΄μ©

---

### π›οΈ κ³„μΈµ κµ¬μ΅° μ•„ν‚¤ν…μ²













